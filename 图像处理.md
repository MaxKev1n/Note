* 图像的数字化包括取样和量化两个过程

* 为使取样以后的信号能完全恢复出原来的连续信号，取样间隔必须满 足Nyquist条件，即在 x 和 y 方向的取样频率必须大于图像在 x 和 y 方向最高频率的两倍。取样频率低于Nyquist取样频率时会产生混叠（Aliasing）

* 图像反转可用于增强图像暗色区域中的白色或灰色细节

* 对数变换可扩展图像中的暗像素值，同时压缩高灰度值，反对数变换的 作用正好相反

* 伽马变换增强图像的对比度

* 分段线性变换函数可以实现对比度拉伸和二值化图像

* 加法运算可以降低图像噪声

* 图像相减常用于增强图像之间的差

* 将一幅图像与一个二值模板图像相乘可以实现感兴趣区域（ROI） 的显示

* 数字图像的几何变换由两种基本运算组成

  * 坐标的空间变换
  * 灰度插值，即为空间变换后的像素赋灰度值

* 仿射变换（Affine Transformation）：指允许图像任意倾斜和移动， 且允许图像在水平和垂直方向上任意伸缩的变换

  * 平移
  * 缩放
  * 旋转
  * 剪切
  * 镜像

  $$
  Rigid \subset Similarity \subset Affine \subset Projective
  $$

  

* 灰度插值（Interpolation）:常见的插值算法包括最近邻插值、双线性差值和双三次差值
  * 最近邻插值简单快速，但是会破坏原图像中像素的渐变关系，产生马赛克效应。最近邻插值法计算量小，简单快速，但有明显的锯齿状，且细 节部分很不清晰
  * 双线性插值使用4个最近邻的灰度来计算给定位置的灰度，其从2个方向 一共进行3次单线性插值。双线性插值法效果要好于最近邻插值，只是计算量稍大一些， 算法复杂些，锯齿难以察觉，但是图像的边缘有轻微的模糊
  * 双三次插值计算量最大，算法也是最为复杂的，但能产生比较 清晰的图像边缘，计算精度较高

*  几何变换应用 - 图像配准

* 灰度直方图反映了一幅图像的灰度分布情况
  * 像素灰度值集中在暗区，图像偏暗
  * 像素灰度值集中在亮区，图像偏亮
  * 像素占据整个灰度级范围并且均匀分布的图像具有较高的对比度

* 图像熵用来表示灰度值的不确定性，其反映了图像中平均信息量的多少。图像灰度分布越均匀（各个灰度值的像素个数一致）以及图像灰度范围 越大，图像的熵越大。
  $$
  -\sum_kp(r_k)log(p(r_k))
  $$
  
* 直方图均衡化可以改变图像整体偏暗或偏亮，灰度层次不丰富的情况， 使得图像的灰度级覆盖更宽的灰度范围，进而增强图像的对比度

* 滤波属于频率域概念，指通过、修改或抑制图像的规定频率分量。

* 空间滤波通过把每个像素的值替换为该像素及其邻域内像素的函数值来修改图像

  * 线性空间滤波通过输入图像和一个滤波器核的卷积运算来实现

    * 卷积满足交换律和结合律

    * 卷积是线性操作

    * 卷积具有平移不变性

    * 可分离

    * 线性空间滤波器包括平滑滤波器和锐化滤波器

      * 平滑滤波器用于降低灰度的急剧过渡，可以模糊图像，降低噪声
      * 锐化滤波器用于突出灰度中的过渡，可以增强边缘
      * 低频：图像中灰度变化缓慢的区域
      * 高频：边缘和其它急剧的灰度过渡
      * 平滑滤波器 – 低通滤波器
        * 平滑-均值滤波器：待处理像素的值等于其邻域内像素的灰度平均值
        * 平滑-高斯滤波器：采用高斯函数作为加权函数。二维高斯函数具有旋转对称性，保证滤波时各方向平滑程度相同。离中心点越远权值越小，确保边缘细节不被模糊。**二维高斯核是可分离核**
        * 卷积核尺寸越大，图像越模糊，细节丢失越多。与均值核相比，高斯核在边缘过度周围可以产生更平滑的结果。如果图像处理的目的是去除噪声，那么平滑滤波在去除噪声的同时 也平滑了边缘和尖锐的细节。

      * 锐化滤波器 – 高通滤波器
        * 图像锐化通过微分运算来实现，微分运算可以突出图像中的急剧灰度过渡，并且不强调灰度缓慢变化的区域
        * 一阶导数为零区域：恒定灰度区域
        * 一阶导数非零区域：灰度台阶或斜坡开始处
        * 二阶导数为零区域：恒定灰度区域、灰度斜坡
        * 二阶导数非零区域：灰度台阶或斜坡的开始处及结束处
        * 拉普拉斯算子使用二阶导数来锐化图像，与一阶导数相比，可增强更精细的细节。**拉普拉斯核的系数之和为零，导致拉普拉斯图像的像素之和也为零**

> 快速高斯滤波:
>
> 1. 确定$\sigma$和高斯核的半径$r$，通常$r=3\sigma$
> 2. 计算一维高斯核$Gx=[G(-r+,...,G(r)],Gy=Gx^T$
> 3. 归一化$Gx$和$Gy$
> 4. 使用$Gx$对图像进行行卷积
> 5. 使用$Gy$对行卷积结果进行列卷积

* 非线性空间滤波器
  *  统计排序滤波器：统计排序滤波器的响应基于邻域内像素的灰度值的排序，通过将中 心像素的值替代为由排序结果确定的值来实现平滑
  * 统计排序滤波器包括中值滤波器、最大值滤波器和最小值滤波器
    * 中值滤波可以抑制随机噪声（特别是椒盐噪声），对图像的模糊也较小。椒盐噪声又叫冲激噪声，在图像中表现为随机分布的纯白色（盐）或者纯黑色（椒）像素点
    * 最大值滤波器可以发现图像中的亮点或腐蚀与亮区相邻的暗域
    * 最小值滤波器可以发现图像中的暗点或腐蚀与暗区相邻的亮域

> 梯度图像：
>
> 1. 求出图像在$x$方向的梯度$g_x$
> 2. 求出图像在$y$方向的梯度$g_y$
> 3. 计算$M(x,y)$

* 可以使用 Roberts 交叉梯度算子和 Sobel 算子计算图像在两个方向的梯度
* 傅里叶变换的性质
  * 时移特性：时域的位移不改变幅度谱，只改变相位谱
  * 频移特性：频域的位移不改变幅度谱和相位谱
  * 共轭对称性
  * 直流特性
  * 卷积定理

$$
离散傅里叶变换：F(u)=\sum_{x=0}^{N-1}f(x)e^{-j\frac{2\pi ux}{N}},u=0,1,...,N-1
$$

$$
离散傅里叶逆变换：f(x)=\frac{1}{N}\sum_{u=0}^{N-1}F(u)e^{j\frac{2\pi ux}{N}},x=0,1,...,N-1
$$

* 频谱的低频分量对应于图像的平滑区域
* 频谱的高频分量对应于图像的边缘或灰度变化剧烈的区域
* 外界叠加噪声对应于频谱中频率较高的部分
* 恒定的干扰条纹对应于频谱中的某些特征点
* 低通滤波（Low Pass Filter）
  * 低通滤波可以实现图像平滑
  * 使用理想低通滤波器会产生振铃效应

$$
H(u,v)=\left\{
\begin{aligned}
1; \quad D(u,v)\le D_0 \\
0; \quad D(u,v)\gt D_0 \\
\end{aligned}
\right.
\\
D(u,v)=\sqrt{u^2+v2}
\\
D_0=截止频率
$$

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527152528798.png" alt="image-20220527152528798" style="zoom:67%;" />

* 高斯低通滤波器，实现的平滑较轻，对图像的模糊程度减少， 不会出现振铃效应

$$
H(u,v)=e^{-D^2(u,v)/(2D^2_0)}\\
D(u,v)=\sqrt{u_2+v_2}
$$

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527185458226.png" alt="image-20220527185458226" style="zoom:67%;" />

* 高通滤波（High Pass Filter）衰减低频分量而不干扰高频信息, 高通滤波可以实现图像锐化，高通滤波器的传递函数可以用 1 减去低通滤波器的传递函数得到$H_{hp}(u,v)=1-H_{lp}(u,v)$
* 高通滤波会严重消弱图像的低频成分，由于直流分量被设置为 0，导致 滤波后图像的平均灰度减小为0。高频增强滤波：通过为传递函数增加一个常数可以避免高通滤波严重削 弱图像低频成分这一问题。高频增强滤波可以增强高频成分，同时保持低频成分和图像的平均灰度

$$
H(u,v)=\left\{
\begin{aligned}
0; \quad D(u,v)\le D_0 \\
1; \quad D(u,v)\gt D_0 \\
\end{aligned}
\right.
\\
D(u,v)=\sqrt{u^2+v2}
\\
D_0=截止频率
$$

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527185620940.png" alt="image-20220527185620940" style="zoom:67%;" />

* 频带滤波器
  * 若某个频带中的频率被滤除，则称为带阻滤波器
  * 若某个频带中的频率被通过，则称为带通滤波器

* 带通滤波器

$$
H(u,v)=\left\{
\begin{aligned}
0; \quad D(u,v)\le D_0-\frac{w}{2} \\
1; \quad D_0-\frac{w}{2} \leq D_(u,v) \leq D_0+\frac{w}{2} \\
0; \quad D(u,v)\gt D_0+\frac{w}{2} \\
\end{aligned}
\right.
\\
D(u,v)=\sqrt{u^2+v2}
\\
D_0=截止频率
\\
w = band\quad width
$$

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527190126649.png" alt="image-20220527190126649" style="zoom:67%;" />

* 陷波带通滤波器

$$
H(u,v)=\left\{
\begin{aligned}
1; \quad D_1(u,v)\le D_0 \quad or \quad D_2(u,v)\leq D_0 \\
0; \quad otherwise \\
\end{aligned}
\right.
\\
D_1(u,v)=\sqrt{(u-u_0)^2+(v-v_0)^2}
\\
D_2(u,v)=\sqrt{(u+u_0)^2+(v+v_0)^2}
\\
D_0= local\quad frequency\quad radius
$$

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527190506415.png" alt="image-20220527190506415" style="zoom:67%;" />

* 陷波带阻滤波器

$$
H(u,v)=\left\{
\begin{aligned}
0; \quad D_1(u,v)\le D_0 \quad or \quad D_2(u,v)\leq D_0 \\
1; \quad otherwise \\
\end{aligned}
\right.
\\
D_1(u,v)=\sqrt{(u-u_0)^2+(v-v_0)^2}
\\
D_2(u,v)=\sqrt{(u+u_0)^2+(v+v_0)^2}
\\
D_0= local\quad frequency\quad radius
$$

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527190552398.png" alt="image-20220527190552398" style="zoom:67%;" />

* 点检测
  * 孤立点的检测使用空域的拉普拉斯核来实现
  * 若滤波器在某点的响应值为 0， 说明该点的灰度值与周围点相同
* 微分算子对噪声敏感，在边缘检测前可对图像进行平滑处理
* 某点处边缘的方向与该点处的梯度方向正交

>基于高斯拉普拉斯算子的边缘检测：
>
>1. 使用高斯低通滤波器平滑输入图像
>2. 计算平滑后图像的拉普拉斯
>3.  寻找拉普拉斯图像的过零点
>
>考虑以某点为中心的 3x3 邻域，若该点为过零点，则意味着它至少有 两个相对相邻像素的符号不同（左右、上下、左对角、右对角）

> Canny边缘检测：
>
> 1. 使用一个高斯滤波器平滑输入图像
> 2. 计算梯度幅度图像和角度图像
> 3. 对梯度幅度图像应用非极大值抑制
> 4.  使用双阈值处理和连通性分析来检测与连接边缘

* 非极大抑制算法： 将当前像素的梯度幅度与沿正负梯度方向上的两个像素进行比较，若当前像素的梯度幅度最大，则保留该点为边缘点，否则抑制该点
* 使用双阈值处理和连通性分析来检测与连接边缘，当弱边缘的周围8邻域有强边缘点存在时，就将该弱边缘点，变成强边缘点，以此来实现对强边缘的补充
* 噪声和非均匀光照容易引起边缘断裂，因此，边缘检测后通常要执行连接算法，将边缘像素组合为有意义的边缘
* 阈值分割：确定一个合适的阈值T，将灰度值大于等于T的像素作为物体或前景，小于阈值的像素作为背景，生成一个二值图像
* 根据阈值的不同选择方式，可分为全局阈值处理、局部阈值处理和自 适应阈值处理
  * 全局阈值处理：对整幅图像采用单一阈值
  * 局部阈值处理：将整幅图像分成若干局部块，每块采用不同的阈值
  * 自适应阈值处理：图像中任意一点处的阈值取决于该点邻域的性质

> 使用迭代算法估计阈值：
>
> 1. 为全局阈值T选择一个初始估计值
> 2. 使用T分割图像，将产生两组像素
> 3. 对两组像素分别计算平均灰度值
> 4. 对两个平均灰度值在取平均作为新的T值
> 5. 重复步骤2到4，直到连续迭代的两个T值间的差小于某个值

> 使用边缘改进阈值处理：
>
> 1. 计算输入图像的梯度幅度或拉普拉斯绝对值得到边缘图像
> 2. 对边缘图像进行阈值处理得到一幅二值模板图像（使用百分位数高 于90%的阈值）
> 3. 使用二值模板图像乘以输入图像，然后基于乘积图像中非零像素的直方 图选取阈值，最后使用选取的阈值对输入图像进行阈值分割

* 根据预定义的生长准则，区域生长将像素或子区域组合为更大的区域。对于一组“种子”点，区域生长通过把那些与种子具有相同预定义性质 （如灰度或颜色范围）的邻域像素添加到每个种子上，来形成增长区域

* 分离：首先将图像等分为4个区域，然后反复将分割得到的子图像再次 分为4个区域，直到所有区域满足相似性准则（比如该区域内灰度值相 等或相似），此时不再进行分裂操作
* 聚合：分离操作完成之后，需要将满足相似性条件的邻接区域进行合并

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527191436435.png" alt="image-20220527191436435" style="zoom:67%;" />

<img src="C:\Users\c1048\AppData\Roaming\Typora\typora-user-images\image-20220527191447357.png" alt="image-20220527191447357" style="zoom:67%;" />

